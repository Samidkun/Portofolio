<section
  id="WhatIDo"
  class="relative flex flex-col lg:flex-row items-center justify-between w-full min-h-screen px-6 lg:px-24 bg-black text-white overflow-hidden py-20 lg:py-0"
>
  <!-- Kiri -->
  <div class="z-10 w-full lg:w-1/2 space-y-6">
    <h2
      class="text-3xl md:text-5xl font-extrabold mb-8 text-center lg:text-left"
    >
      What I Do?
    </h2>

    <!-- ITEM 1 -->
    <div
      class="accordion bg-[#0B0D13] border border-gray-800 rounded-2xl overflow-hidden transition-all duration-500 hover:border-purple-400"
    >
      <button
        class="accordion-summary flex items-center justify-between w-full px-6 py-4 cursor-pointer text-xl md:text-2xl font-semibold text-purple-400"
      >
        <div class="flex items-center gap-3">
          <img
            src="/icons/globe.png"
            alt="Web Icon"
            class="w-6 h-6 md:w-7 md:h-7"
          />
          <span>Web Development</span>
        </div>
        <svg
          class="arrow w-5 h-5 text-purple-400 transition-transform duration-500"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      <div
        class="accordion-content transition-all duration-500 ease-in-out max-h-0 opacity-0 overflow-hidden px-8"
      >
        <ul
          class="list-disc ml-5 mt-4 space-y-1 text-gray-300 text-sm md:text-base pb-4"
        >
          <li>Landing Pages and Business Websites</li>
          <li>Full Stack Development</li>
          <li>Portfolio Websites</li>
        </ul>
      </div>
    </div>

    <!-- ITEM 2 -->
    <div
      class="accordion bg-[#0B0D13] border border-gray-800 rounded-2xl overflow-hidden transition-all duration-500 hover:border-purple-400"
    >
      <button
        class="accordion-summary flex items-center justify-between w-full px-6 py-4 cursor-pointer text-xl md:text-2xl font-semibold text-purple-400"
      >
        <div class="flex items-center gap-3">
          <img
            src="/icons/mobile.png"
            alt="Mobile Icon"
            class="w-6 h-6 md:w-7 md:h-7"
          />
          <span>Mobile Development</span>
        </div>
        <svg
          class="arrow w-5 h-5 text-purple-400 transition-transform duration-500"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      <div
        class="accordion-content transition-all duration-500 ease-in-out max-h-0 opacity-0 overflow-hidden px-8"
      >
        <ul
          class="list-disc ml-5 mt-4 space-y-1 text-gray-300 text-sm md:text-base pb-4"
        >
          <li>Mobile-Friendly Apps</li>
          <li>Mobile app development using Flutter and Dart</li>
        </ul>
      </div>
    </div>

    <!-- ITEM 3 -->
    <div
      class="accordion bg-[#0B0D13] border border-gray-800 rounded-2xl overflow-hidden transition-all duration-500 hover:border-purple-400"
    >
      <button
        class="accordion-summary flex items-center justify-between w-full px-6 py-4 cursor-pointer text-xl md:text-2xl font-semibold text-purple-400"
      >
        <div class="flex items-center gap-3">
          <img
            src="/icons/uiux.png"
            alt="UI/UX Icon"
            class="w-6 h-6 md:w-7 md:h-7"
          />
          <span>UI/UX Design & Prototyping</span>
        </div>
        <svg
          class="arrow w-5 h-5 text-purple-400 transition-transform duration-500"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      <div
        class="accordion-content transition-all duration-500 ease-in-out max-h-0 opacity-0 overflow-hidden px-8"
      >
        <ul
          class="list-disc ml-5 mt-4 space-y-1 text-gray-300 text-sm md:text-base pb-4"
        >
          <li>UI design with Figma & Canva</li>
          <li>UX research & improvements</li>
          <li>Prototyping for websites & mobile apps</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Kanan: efek teks -->
  <div
    class="hidden lg:flex absolute right-0 inset-y-0 items-center justify-end pr-[5rem] pointer-events-none translate-y-[3.5rem] relative overflow-hidden"
  >
    <pre
      id="codeEffect"
      class="text-[#b280ff] font-mono font-extralight text-[23px] leading-tight whitespace-pre select-none text-right tracking-wide opacity-90 animate-pulse-glow"
      style="text-shadow: 0 0 6px rgba(168,85,247,0.8), 0 0 12px rgba(168,85,247,0.4);">{`
O4C5H0A9SZ@7V%*F1J_B3G^Q2NPD98X+K5TL!PJMG6E^YW_J
<Q29VT9LN_K!9A@7|M*7F4NHNE3BL$L0XSVØD(C+9SHL
O#J5!KGM3MT2ZAHL8N.PA4XC8$_C6R&D)VQE#W*BY
T_9$AF2E#H9L@G4M8N!PY3C*VJ5J#F+K1XQZØ(N)ND
R!9SM&.QK0S*T(C*M#7ZL!PQA-@B)V3YKW44<EQ$5G$)
A#3Z*Q7L$E5E89@#FG!H96M&00DCK6_TV4Y^E-2P&R7
NZV@D!R8#ZT6C7M*E5Q!A^WJK^JN*G9L_ØXY4P6H)#
_7K6N_L5E9*T3!6F$M3BZ#NC%!P&V4!2X>0Y-DX$6*R?
S8L$V!T0N*Q!0^R6P4F$C!9A^Z9M)L_E*QK0Y#D!X&M%
Q3Z*T7T4B$8!$N!K@46C!E+F2L9YCV+G0X)RH&W!J?
`}</pre>
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,0,0,0)_40%,rgba(0,0,0,0.7)_75%,rgba(0,0,0,1)_100%)] pointer-events-none"
    >
    </div>
  </div>

  <script>
    // teks glitch
    const code = document.getElementById("codeEffect") as HTMLElement | null;
    if (code) {
      const original = code.textContent || "";
      const chars =
        "!@#$%^&*()_+{}[]<>?/|~ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      function glitchText() {
        const arr = original.split("");
        for (let i = 0; i < arr.length; i++) {
          if (0.05 > Math.random() && arr[i] !== "\n") {
            arr[i] = chars[Math.floor(Math.random() * chars.length)];
          }
        }
        code!.textContent = arr.join("");
      }
      setInterval(glitchText, 200);
    }

    // dropdown logic (Type-safe)
    const accordions = document.querySelectorAll<HTMLElement>(".accordion");
    accordions.forEach((acc) => {
      const summary = acc.querySelector<HTMLElement>(".accordion-summary");
      const content = acc.querySelector<HTMLElement>(".accordion-content");
      const arrow = acc.querySelector<SVGElement>(".arrow");

      if (!summary || !content || !arrow) return;

      summary.addEventListener("click", () => {
        const isOpen = acc.classList.contains("open");

        // Tutup semua
        accordions.forEach((other) => {
          const c = other.querySelector<HTMLElement>(".accordion-content");
          const a = other.querySelector<SVGElement>(".arrow");
          other.classList.remove("open");
          if (c && c.style) {
            c.style.maxHeight = "0";
            c.style.opacity = "0";
          }
          if (a && a.style) a.style.transform = "rotate(0deg)";
        });

        // Buka/tutup yang aktif
        if (!isOpen) {
          acc.classList.add("open");
          if (content && content.style) {
            content.style.maxHeight = content.scrollHeight + "px";
            content.style.opacity = "1";
          }
          if (arrow && arrow.style) arrow.style.transform = "rotate(180deg)";
        }
      });
    });
  </script>

  <style>
    /* smooth transition */
    .accordion-content {
      transition:
        max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.5s ease-in-out;
    }

    /* arrow glow */
    .arrow {
      filter: drop-shadow(0 0 8px rgba(168, 85, 247, 0.5));
      transition:
        transform 0.6s cubic-bezier(0.22, 1, 0.36, 1),
        filter 0.3s ease;
    }
    .arrow:hover {
      filter: drop-shadow(0 0 12px rgba(168, 85, 247, 0.8));
    }

    /* glow breathing */
    @keyframes pulse-glow {
      0% {
        opacity: 0.7;
        filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.3));
      }
      50% {
        opacity: 1;
        filter: drop-shadow(0 0 25px rgba(168, 85, 247, 0.8));
      }
      100% {
        opacity: 0.7;
        filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.3));
      }
    }
    .animate-pulse-glow {
      animation: pulse-glow 5s ease-in-out infinite;
    }
  </style>
</section>
